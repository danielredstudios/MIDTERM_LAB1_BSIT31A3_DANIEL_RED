@using elective_2_gradesheet.Models
@model StudentProfileViewModel

@{
    ViewData["Title"] = "Student Profile";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>@Model.Student.FullName</h1>
    <!-- Added "Back to Records" link -->
    <a asp-action="Records" class="btn btn-secondary">Back to Records</a>
</div>


<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">Student Details</h5>
        <p><strong>Section:</strong> @Model.Student.Section.Name</p>
        <p><strong>Email:</strong> @Model.Student.Email</p>
        <p><strong>GitHub:</strong> <a href="@Model.Student.GitHubLink" target="_blank">@Model.Student.GitHubLink</a></p>
    </div>
</div>

<!-- Render the partial view for the forms -->
<partial name="Shared/Partials/_StudentProfileFormsPartial" model="Model" />

@foreach (var group in Model.ActivitiesByPeriod)
{
    <h2>@group.Key</h2>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Activity Name</th>
                <th>Score</th>
                <th>Total Items</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var activity in group)
            {
                <tr>
                    <td>@activity.ActivityName</td>
                    <td>@activity.Score</td>
                    <td>@activity.TotalItems</td>
                    <td>
                        <button type="button" class="btn btn-sm btn-warning" data-bs-toggle="modal" data-bs-target="#editActivityModal"
                                data-activity-id="@activity.ActivityId"
                                data-student-id="@Model.Student.Id"
                                data-activity-name="@activity.ActivityName"
                                data-total-items="@activity.TotalItems"
                                data-score="@activity.Score">
                            Edit
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

<!-- Render the partial view for the edit modal -->
<partial name="Shared/Partials/_EditActivityModalPartial" />


@section Scripts {
    <script src="~/js/views/studentProfile.js" asp-append-version="true"></script>
}
